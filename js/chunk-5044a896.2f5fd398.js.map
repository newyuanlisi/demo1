{"version":3,"sources":["webpack:///./src/views/Tag.vue?2a40","webpack:///./src/views/Tag.vue?d7ab","webpack:///src/views/Tag.vue","webpack:///./src/views/Tag.vue?d429","webpack:///./src/views/Tag.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","list","index","key","class","active","on","$event","selectlist","_v","_s","label","tag","attrs","image","addToMall","beforeEnter","enter","afterEnter","ball","_e","staticRenderFns","data","tags","tabslabel","methods","created","getclassify","gettaglist","mounted","tagLiftList","style","height","bodyHeight","tagRightList","component"],"mappings":"2IAAA,W,2CCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,cAAc,CAACE,YAAY,iBAAiB,CAACF,EAAG,KAAKJ,EAAIO,GAAIP,EAAa,WAAE,SAASQ,EAAKC,GAAO,OAAOL,EAAG,KAAK,CAACM,IAAID,EAAME,MAAMH,EAAKI,OAAS,SAAW,GAAGC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAIe,WAAWN,MAAU,CAACT,EAAIgB,GAAG,IAAIhB,EAAIiB,GAAGT,EAAKU,OAAO,UAAS,KAAKd,EAAG,cAAc,CAACE,YAAY,kBAAkB,CAACF,EAAG,KAAKJ,EAAIO,GAAIP,EAAQ,MAAE,SAASmB,EAAIV,GAAO,OAAOL,EAAG,KAAK,CAACM,IAAID,GAAO,CAACL,EAAG,MAAM,CAACgB,MAAM,CAAC,IAAMD,EAAIE,MAAM,IAAM,MAAMrB,EAAIgB,GAAG,KAAKZ,EAAG,IAAI,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGE,EAAID,OAAO,KAAKd,EAAG,IAAI,CAACE,YAAY,aAAaO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAIsB,UAAUR,EAAQK,cAAe,KAAKf,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,aAAa,CAACS,GAAG,CAAC,eAAeb,EAAIuB,YAAY,MAAQvB,EAAIwB,MAAM,WAAaxB,EAAIyB,aAAa,CAAEzB,EAAI0B,KAAS,KAAEtB,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,IAAI,CAACE,YAAY,mBAAmBN,EAAI2B,QAAQ,IAAI,IACz+BC,EAAkB,G,4CCmCtB,GACEC,KADF,WAEI,MAAO,CACLH,KAAM,CAAZ,eACMI,KAAM,GACNC,UAAW,GACXnB,QAAQ,IAIZoB,QAAS,CACPjB,WADJ,SACA,GACM,KAAN,iCAEU,EAAV,OADA,QAMM,KAAN,gBAII,YAbJ,SAaA,iLACA,+CADA,OACA,EADA,OAEA,cAFA,8CAKI,WAlBJ,WAkBA,8KACA,4BADA,OACA,EADA,OAEA,mBAFA,8CAKI,UAvBJ,SAuBA,KACM,KAAN,0BAEM,KAAN,aAEM,KAAN,kBAGI,YA/BJ,SA+BA,GAEM,IAAN,eACM,QAAN,OAEM,IAAN,4BACM,QAAN,OACM,IAAN,8BACA,8BACM,QAAN,SAEM,EAAN,sBACM,EAAN,qDACM,IAAN,4BACM,EAAN,sDAGI,MAhDJ,SAgDA,KAEM,SAAN,kBAEM,EAAN,uCACM,IAAN,4BACM,EAAN,uCAEM,EAAN,qCAGI,WA3DJ,SA2DA,GAEM,KAAN,aACM,EAAN,uBAIEkB,QA5EF,WA+EIhC,KAAKiC,YAAY,GACjBjC,KAAKkC,cAIPC,QApFF,WAqFI,IAAJ,2CACA,4CACA,wCACIC,EAAYC,MAAMC,OAASC,EAA/B,QACIC,EAAaH,MAAMC,OAASC,EAAhC,UC7HwV,I,wBCQpVE,EAAY,eACd,EACA3C,EACA6B,GACA,EACA,KACA,KACA,MAIa,aAAAc,E","file":"js/chunk-5044a896.2f5fd398.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tag.vue?vue&type=style&index=0&lang=stylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"scroll-list-wrap\"},[_c('cube-scroll',{staticClass:\"tag-Left-List\"},[_c('ul',_vm._l((_vm.tabslabel),function(list,index){return _c('li',{key:index,class:list.active ? 'active' : '',on:{\"click\":function($event){return _vm.selectlist(index)}}},[_vm._v(\" \"+_vm._s(list.label)+\" \")])}),0)]),_c('cube-scroll',{staticClass:\"tag-Right-List\"},[_c('ul',_vm._l((_vm.tags),function(tag,index){return _c('li',{key:index},[_c('img',{attrs:{\"src\":tag.image,\"alt\":\"\"}}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(tag.label)+\" \"),_c('i',{staticClass:\"cubeic-add\",on:{\"click\":function($event){return _vm.addToMall($event, tag)}}})])])}),0)]),_c('div',{staticClass:\"ball-wrap\"},[_c('transition',{on:{\"before-enter\":_vm.beforeEnter,\"enter\":_vm.enter,\"afterEnter\":_vm.afterEnter}},[(_vm.ball.show)?_c('div',{staticClass:\"ball\"},[_c('div',{staticClass:\"inner\"},[_c('i',{staticClass:\"cubeic-add\"})])]):_vm._e()])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"scroll-list-wrap\">\r\n      <cube-scroll class=\"tag-Left-List\">\r\n        <ul>\r\n          <li v-for=\"(list, index) in tabslabel\" :key=\"index\" :class=\"list.active ? 'active' : '' \" @click=\"selectlist(index)\">\r\n            {{ list.label }}\r\n          </li>\r\n        </ul>\r\n      </cube-scroll>\r\n      <cube-scroll class=\"tag-Right-List\">\r\n        <ul>\r\n          <li v-for=\"(tag, index) in tags\" :key=\"index\">\r\n            <img :src=\"tag.image\" alt=\"\">              <!-- ($enent,tag) 传入到vuex里 -->\r\n            <p>{{ tag.label }} <i class=\"cubeic-add\" @click=\"addToMall($event, tag)\"></i></p>\r\n          </li>\r\n        </ul>\r\n      </cube-scroll>\r\n      <div class=\"ball-wrap\">\r\n        <transition\r\n          @before-enter=\"beforeEnter\"\r\n          @enter=\"enter\"\r\n          @afterEnter=\"afterEnter\"\r\n        >\r\n          <div class=\"ball\" v-if=\"ball.show\">\r\n            <div class=\"inner\">\r\n              <i class=\"cubeic-add\"></i>\r\n            </div>\r\n          </div>\r\n        </transition>\r\n      </div>\r\n\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      ball: { show: false, el: ''},\r\n      tags: [],\r\n      tabslabel: [],\r\n      active: true,\r\n    }\r\n  },\r\n  \r\n  methods: {\r\n    selectlist(index) {\r\n        this.tabslabel.forEach((val, ind) => {\r\n          if(index == ind) {\r\n            val.active = true\r\n          } else {\r\n            val.active = false\r\n          }\r\n        })\r\n        this.getclassify(index)\r\n    },\r\n    //获取分类\r\n    //这里遇到一个傻逼问题重启了电脑才解决\r\n    async getclassify(index) {\r\n        const tags = await this.$http.get('/api/classify', { params: {type: index} })\r\n        this.tags = tags.data\r\n      },\r\n    //获取左边分类列表\r\n    async gettaglist() {\r\n        const tabslabel = await this.$http.get('/api/taglist')\r\n        this.tabslabel = tabslabel.data    \r\n      },\r\n      //添加商品到购物车\r\n      addToMall(e, tag) {\r\n        this.$store.commit('toMall', tag)\r\n        //让小球显示\r\n        this.ball.show = true\r\n        //获取点击元素\r\n        this.ball.el = e.target\r\n      },\r\n\r\n      beforeEnter(el) {\r\n        //获取点击的位置\r\n        const dom = this.ball.el\r\n        console.log(dom)\r\n        //原生js获取dom位置\r\n        const rect = dom.getBoundingClientRect()\r\n        console.log(rect)\r\n        const x = rect.left - window.innerWidth * 0.7\r\n        const y = -(window.innerHeight - rect.top)\r\n        console.log(x, y)\r\n        //让小球移动到点击的位置\r\n        el.style.display = 'block'\r\n        el.style.transform = `translate3d(0, ${y}px, 0)`\r\n        const inner = el.querySelector('.inner')\r\n        inner.style.transform = `translate3d(${x}px, 0, 0)`\r\n      },\r\n\r\n      enter(el, done) {\r\n        //触发重绘，否则无法出现效果\r\n        document.body.offsetHeight\r\n        //小球移动回到购物车位置\r\n        el.style.transform = `translate3d(0, 0, 0)`\r\n        const inner = el.querySelector('.inner')\r\n        inner.style.transform = `translate3d(0, 0, 0)`\r\n        //过度完成之后执行的事件\r\n        el.addEventListener('transitionend', done)\r\n      },\r\n\r\n      afterEnter(el) {\r\n        //结束隐藏小球\r\n        this.ball.show = false\r\n        el.style.display = 'none'\r\n      }\r\n  },\r\n\r\n  created() {\r\n    //获取默认分类的数据\r\n    //页面初始化时加载此方法\r\n    this.getclassify(0)\r\n    this.gettaglist()\r\n  },\r\n\r\n  //vue的生命周期函数，在dom渲染完成之后\r\n  mounted() {\r\n    const tagLiftList = document.querySelector('.tag-Left-List')\r\n    const tagRightList = document.querySelector('.tag-Right-List')\r\n    const bodyHeight = document.documentElement.clientHeight\r\n    tagLiftList.style.height = bodyHeight-57 + 'px'\r\n    tagRightList.style.height = bodyHeight-57 + 'px'\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n  .ball-wrap\r\n    .ball\r\n      position fixed\r\n      left 65%\r\n      bottom 10px\r\n      z-index 1003\r\n      color red\r\n      transition all 1s cubic-bezier(0.49,-0.29,0.75,0.41)\r\n      .inner\r\n        width 16px\r\n        height 16px\r\n        transition all 1s\r\n  .scroll-list-wrap\r\n    display flex\r\n  .tag-Left-List\r\n    width 30%\r\n    line-height 50px\r\n    background-color #f8f8f8\r\n    font-size 16px\r\n    border-bottom 1px solid #fff\r\n  .active\r\n    background-color #fff\r\n    color #e93b3d\r\n\r\n  .tag-Right-List\r\n    width 70%\r\n    ul\r\n      display flex\r\n      flex-wrap wrap\r\n      li\r\n        width 50%\r\n        justify-content center\r\n        align-content center\r\n        font-size 15px\r\n        img\r\n          width 80px\r\n          height 80px\r\n        .cubeic-add\r\n          font-size 18px\r\n  \r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--16-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tag.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--16-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tag.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tag.vue?vue&type=template&id=5c136021&\"\nimport script from \"./Tag.vue?vue&type=script&lang=js&\"\nexport * from \"./Tag.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tag.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}