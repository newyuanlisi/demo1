(function(e){function t(t){for(var r,a,c=t[0],l=t[1],i=t[2],s=0,f=[];s<c.length;s++)a=c[s],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(f.length)f.shift()();return u.push.apply(u,i||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(u.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},a={app:0},o={app:0},u=[];function c(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-182c4235":"36a0a4e7","chunk-1ce3e8f2":"7d63b966","chunk-1fb04c18":"b9019719","chunk-2d0bd977":"0f0c87ac","chunk-5044a896":"2f5fd398","chunk-9b2e3a32":"b398c8dc"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-182c4235":1,"chunk-1ce3e8f2":1,"chunk-1fb04c18":1,"chunk-5044a896":1,"chunk-9b2e3a32":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-182c4235":"a932cfcf","chunk-1ce3e8f2":"ae806f88","chunk-1fb04c18":"42c40a39","chunk-2d0bd977":"31d6cfe0","chunk-5044a896":"c56d17ff","chunk-9b2e3a32":"e1168609"}[e]+".css",o=l.p+r,u=document.getElementsByTagName("link"),c=0;c<u.length;c++){var i=u[c],s=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(s===r||s===o))return t()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){i=f[c],s=i.getAttribute("data-href");if(s===r||s===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||o,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=r,delete a[e],d.parentNode.removeChild(d),n(u)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var u=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=u);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.src=c(e);var f=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",f.name="ChunkLoadError",f.type=r,f.request=a,n[1](f)}o[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var f=0;f<i.length;f++)t(i[f]);var d=s;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"19a9":function(e,t,n){e.exports=n.p+"img/2c933500885db5db33cc5094480e9ae8.798673f5.jpeg"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("cadd");r["a"].use(a["a"]);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}}),n("router-view")],1)},u=[],c=(n("7faf"),n("2877")),l={},i=Object(c["a"])(l,o,u,!1,null,null,null),s=i.exports,f=(n("d3b7"),n("8c4f")),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("img",{staticClass:"headimg",attrs:{src:n("19a9"),alt:""}}),r("cube-form",{attrs:{model:e.model,schema:e.schema},on:{submit:e.submitHandler}})],1)},p=[],m=(n("ac1f"),n("5319"),n("96cf"),n("1da1")),h={data:function(){return{model:{username:"",password:""},schema:{fields:[{type:"input",modelKey:"username",label:"用户名",props:{placeholder:"请输入用户名"},rules:{required:!0,type:"string",min:3,max:15},trigger:"blur",messages:{required:"用户名不能为空",min:"不能小于3个",max:"不能大于15个"}},{type:"input",modelKey:"password",label:"密 码",props:{placeholder:"请输入密码",type:"password",eye:{open:!1}},rules:{required:!0,min:6,max:20},trigger:"blur",messages:{required:"密码不能为空",min:"密码不能小于6位",max:"密码不能大于20位"}},{type:"submit",label:"登录"}]}}},methods:{submitHandler:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,t.$http.get("/api/login",{params:t.model});case 4:r=n.sent,console.log(r),"0"==r.code?(t.$store.commit("settoken",r.token),window.localStorage.setItem("token",r.token),t.$route.query.redirect?t.$router.replace({path:t.$route.query.redirect}):t.$router.replace({path:"/nav/index"})):alert(r.message),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()}}},b=h,g=(n("7fa3"),Object(c["a"])(b,d,p,!1,null,null,null)),v=g.exports;n("73cf");r["a"].use(f["a"]);var y=[{path:"/",name:"index",redirect:"nav/index"},{path:"/login",name:"login",component:v},{path:"/register",name:"register",component:function(){return Promise.resolve().then(n.bind(null,"73cf"))}},{path:"/index",name:"index",component:function(){return n.e("chunk-182c4235").then(n.bind(null,"d504"))}},{path:"/nav",name:"nav",component:function(){return n.e("chunk-1ce3e8f2").then(n.bind(null,"af20"))},children:[{path:"index",name:"index",component:function(){return n.e("chunk-182c4235").then(n.bind(null,"d504"))}},{path:"tag",name:"tag",component:function(){return n.e("chunk-5044a896").then(n.bind(null,"8ea7"))}},{path:"search",name:"search",component:function(){return n.e("chunk-2d0bd977").then(n.bind(null,"2d3b"))}},{path:"mall",name:"mall",meta:{requireAuth:!0},component:function(){return n.e("chunk-1fb04c18").then(n.bind(null,"025a"))}},{path:"person",name:"person",meta:{requireAuth:!0},component:function(){return n.e("chunk-9b2e3a32").then(n.bind(null,"ce40"))}}]}],k=new f["a"]({mode:"history",base:"/",routes:y}),w=k,x=(n("7db0"),n("4160"),n("a434"),n("159b"),n("2f62"));r["a"].use(x["a"]);var M=new x["a"].Store({state:{token:"",arrMall:JSON.parse(localStorage.getItem("arrMall"))||[]},mutations:{settoken:function(e,t){e.token=t},toMall:function(e,t){var n=e.arrMall.find((function(e){return t.label==e.title}));n?n.mallCount+=1:e.arrMall.push({title:t.label,mallCount:1})},addMall:function(e,t){e.arrMall[t].mallCount++},removeMall:function(e,t){e.arrMall[t].mallCount>1?e.arrMall[t].mallCount--:window.confirm("是否从购物车移除?")&&e.arrMall.splice(t,1)},clearMall:function(e){e.arrMall=[]}},actions:{},getters:{countSum:function(e){var t=0;return e.arrMall.forEach((function(e){t+=e.mallCount})),t}},modules:{}});M.subscribe((function(e,t){localStorage.setItem("arrMall",JSON.stringify(t.arrMall))}));var O=M,S=n("8587"),q=n.n(S);n("5cfb");function j(){q.a.interceptors.request.use((function(e){return O.state.token&&(e.headers.token=O.state.token),e})),q.a.interceptors.response.use((function(e){if(200==e.status){var t=e.data;return-1==t.code&&(O.commit("settoken",""),localStorage.removeItem("token"),w.replace({name:"login",path:"/login"})),t}return e}))}j(),r["a"].config.productionTip=!1,r["a"].prototype.$http=q.a,w.beforeEach((function(e,t,n){O.commit("settoken",localStorage.getItem("token")),e.meta.requireAuth?O.state.token?n():n({path:"/login",query:{redirect:e.fullPath}}):n()})),new r["a"]({router:w,store:O,render:function(e){return e(s)}}).$mount("#app")},7075:function(e,t,n){"use strict";n("f959")},"73cf":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("img",{staticClass:"headimg",attrs:{src:n("19a9"),alt:""}}),r("cube-form",{attrs:{model:e.model,schema:e.schema},on:{submit:e.submitHandler}})],1)},a=[],o={data:function(){return{model:{username:"",password:""},schema:{fields:[{type:"input",modelKey:"username",label:"用户名",props:{placeholder:"请输入用户名"},rules:{required:!0,type:"string",min:3,max:15},trigger:"blur",messages:{required:"用户名不能为空",min:"不能小于3个",max:"不能大于15个"}},{type:"input",modelKey:"password",label:"密 码",props:{placeholder:"请输入密码",type:"password",eye:{open:!1}},rules:{required:!0,min:6,max:20},trigger:"blur",messages:{required:"密码不能为空",min:"密码不能小于6位",max:"密码不能大于20位"}},{type:"submit",label:"注册"}]}}},methods:{submitHandler:function(e){e.preventDefault(),this.$http.get("/api/register",{params:this.model}).then((function(e){console.log(e.message)})).catch((function(e){console.log(e)}))}}},u=o,c=(n("7075"),n("2877")),l=Object(c["a"])(u,r,a,!1,null,null,null);t["default"]=l.exports},"7fa3":function(e,t,n){"use strict";n("cb85")},"7faf":function(e,t,n){"use strict";n("b8ff")},b8ff:function(e,t,n){},cb85:function(e,t,n){},f959:function(e,t,n){}});
//# sourceMappingURL=app.4e1a2fb3.js.map